<!DOCTYPE html>
<html>
  <head>
    <title>Memory Game</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style>
      #memoryGame{
        margin-left:5%;
        font-family: 'Open Sans', sans-serif;
        font-size: 1.7em;
      }

      #byline{
        margin-left:5%;
        font-family: 'Open Sans', sans-serif;
        font-size: 1.2em;   
        margin-bottom: 5%;
        color:    #909090      
      }

      .card{
        width:100px;
        height:100px;
        float:left;
        margin:5px;
        color:  #FF8C00;
        padding:5px;
        border:solid 1px #FF8C00;
      }
      
      #Playfield{
        width: 600px;
        margin-left: 30%
      }
      
      .down{
        background: #FF8C00;
      }
      
      .clear{
        clear:both;
      }
      
      p {
        margin:0; 
        padding: 5px 15px 0 5px;
      }
      
      #playerInfo{
        padding:15px 0 35px 0;
      }
			
      #player1 p, #player2 p{
        float:left;
      }
      
      .active{
        background: yellow;
      }

      #cardimage{
        width:100px;
        height:100px;
      }


/*=========face up and card matched images======== */
/*      san francisco */
      #one.up{
        background: url('http://images.wildtangent.com/mysterypistoleninsanfrancisco/big_icon.jpg');
        background-size: 120px 120px;
      }
      #one.matched{
        background: url('http://images.wildtangent.com/mysterypistoleninsanfrancisco/big_icon.jpg');
        background-size: 120px 120px;
      }

/*paris*/
      #two.up{
        background: url('https://static-s.aa-cdn.net/img/ios/916150096/c44aa1fe5a1f1b6b32e44eaa62554a9e?v=1');
        background-size: 120px 120px;
      }
      #two.matched{
        background: url('https://static-s.aa-cdn.net/img/ios/916150096/c44aa1fe5a1f1b6b32e44eaa62554a9e?v=1');
        background-size: 120px 120px;
      }
      
/*london*/
      #three.up{
        background: url('http://event.6sans.no/wp-content/uploads/2014/03/London.jpg');
        background-size: 120px 120px;
      }
      #three.matched{
        background: url('http://event.6sans.no/wp-content/uploads/2014/03/London.jpg');
        background-size: 120px 120px;
      }

/*tokyo*/
      #four.up{
        background: url('https://noramennolife.files.wordpress.com/2014/05/223.jpg');
        background-size: 120px 120px;
      }
      #four.matched{
        background: url('https://noramennolife.files.wordpress.com/2014/05/223.jpg');
        background-size: 120px 120px;
      }

/*rome*/
      #five.up{
        background: url('http://media-cdn.tripadvisor.com/media/photo-s/01/95/19/7e/rome.jpg');
        background-size: 120px 120px;
      }
      #five.matched{
        background: url('http://media-cdn.tripadvisor.com/media/photo-s/01/95/19/7e/rome.jpg');
        background-size: 120px 120px;
      }

/*sydney    */  
      #six.up{
        background: url('http://www.atravelbook.com/wp-content/uploads/2012/11/Sydney-Opera-House.jpg');
        background-size: 120px 120px;
      }
      #six.matched{
        background: url('http://www.atravelbook.com/wp-content/uploads/2012/11/Sydney-Opera-House.jpg');
        background-size: 120px 120px;
      }

/*seattle  */    
      #seven.up{
        background: url('http://images1.fanpop.com/images/photos/2200000/Seattle-Wallpaper-seattle-2232631-1024-768.jpg');
        background-size: 120px 120px;
      }
      #seven.matched{
        background: url('http://images1.fanpop.com/images/photos/2200000/Seattle-Wallpaper-seattle-2232631-1024-768.jpg');
        background-size: 120px 120px;
      }

/*New york City  */     
      #eight.up{
        background: url('http://www.filmsofcrawford.com/sitebuildercontent/sitebuilderpictures/skyline.jpg');
        background-size: 120px 120px;
      }
      #eight.matched{
        background: url('http://www.filmsofcrawford.com/sitebuildercontent/sitebuilderpictures/skyline.jpg');
        background-size: 120px 120px;
      }
/*================CSS End====================*/




    </style>
  </head>
  
  <body>
    <p id="memoryGame"> Memory Game</p>
    <p id= "byline">See how fast you can match all the cards</p>
    <div id="Playfield">
      <div class="card down one" data-face="1" id="one"></div> 
      <div class="card down two" data-face="2" id="two"></div>
      <div class="card down three" data-face="3" id="three"></div>
      <div class="card down four" data-face="4" id="four"></div>
      <div class="card down five" data-face="5" id="five"></div>
      <div class="card down six" data-face="6" id="six"></div>
      <div class="card down seven" data-face="7" id="seven"></div>
      <div class="card down eight" data-face="8" id="eight"></div>
<!--       <div class="card down nine" data-face="9"></div>
      <div class="card down ten" data-face="10"></div>
      <div class="card down eleven" data-face="11"></div>
      <div class="card down twelve" data-face="12"></div> -->
      <div class="card down one" data-face="1" id="one"></div> 
      <div class="card down two" data-face="2" id="two"></div>
      <div class="card down three" data-face="3" id="three"></div>
      <div class="card down four" data-face="4" id="four"></div>
      <div class="card down five" data-face="5" id="five"></div>
      <div class="card down six" data-face="6" id="six"></div>
      <div class="card down seven" data-face="7" id="seven"></div>
      <div class="card down eight" data-face="8" id="eight"></div>
<!--       <div class="card down nine" data-face="9"></div>
      <div class="card down ten" data-face="10"></div>
      <div class="card down eleven" data-face="11"></div>
      <div class="card down twelve" data-face="12"></div> -->
    </div>
    
<!--     <div id="playerInfo" class="clear">
      <div id="player1">
        <p><strong>Player 1:</strong></p>
        <p>Turns Taken: <span class="noTurns">0</span></p>
        <p>Pairs matched: <span class="noPairs">0</span></p>
      </div>
      
      <div id="player2" class="clear">
        <p><strong>Player 2:</strong></p>
        <p>Turns Taken: <span class="noTurns">0</span></p>
        <p>Pairs matched: <span class="noPairs">0</span></p>
      </div> -->
    </div>
    <p class="clear"><a href="#" id="reset">Click here to start over</a></p>
    
    <script type="text/javascript">
      function twoCardsFaceUp(){
        return $(".up").length == 2;
      }
      
      function cardsMatch(){
        return $(".up:eq(0)").text() == $(".up:eq(1)").text();
      }
      
      function markCardsAsMatched(){
        $(".up").each(function(){
          $(this).addClass("matched").removeClass("up").off("click");
        });
      }
      
      // function updateScore(player){
      //   var el = $(player).find(".noPairs");
      //   var p = Number(el.text());
      //   el.text(p+1);
      // }
      
      function allCardsMatched(){
        return ($(".matched").length == 24)
      }
      
      function flipCardsBackOver(){
        setTimeout(function(){
          $(".up").each(function(){
            $(this).addClass("down").removeClass("up");
          });
        }, 1000);
      }
      
      function shuffle(cards){
        // Uses Fisher&#8211;Yates shuffle
        // See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle
        var i = cards.length, j, tempi, tempj;
        if ( i == 0 ) return false;
        while ( --i ) {
          j = Math.floor( Math.random() * ( i + 1 ) );
          tempi = cards[i];
          tempj = cards[j];
          cards[i] = tempj;
          cards[j] = tempi;
        }
        return cards;
      }
      
      function highlightCurrentPlayer(player){
        $("#playerInfo p").each(function(){
          if ($(this).hasClass("active")){
            $(this).removeClass("active");
          }
        });
        $(player).find("p").first().addClass("active");
      }
      
      function incrementTurns(player){
        var el = $(player).find(".noTurns");
        var t = Number(el.text());
        el.text(t+1);
      }
      
      // function updateCurrentPlayer(player){
      //   currentPlayer = (currentPlayer.match(/1/))? "#player2" : "#player1"
      // }
      
      function winner(){
        var playerOnePoints = Number($("#player1").find(".noPairs").text());
        var playerTwoPoints = Number($("#player2").find(".noPairs").text());
        if (playerOnePoints > playerTwoPoints){
          return "Player one won!";
        } else if (playerOnePoints < playerTwoPoints){
          return "Player two won!";
        } else {
          return "An honourable draw!";
        }
      }
      
      // Shuffle cards
      var cards = $(".card");
      cards.remove();
      cards = shuffle(cards);
      cards.appendTo($("#Playfield"));
      
      // Main Loop
      $('.card').on("click", function(){
        if ($(".up").length == 2){
          return false;
        }
  
        $(this).removeClass("down").addClass("up");
        
        if (twoCardsFaceUp()){
          incrementTurns(currentPlayer);
          if (cardsMatch()){
            markCardsAsMatched();
            updateScore(currentPlayer);
            if (allCardsMatched()){
              alert(winner());
            }
          }else{
            flipCardsBackOver();
            updateCurrentPlayer(currentPlayer);
            setTimeout(function(){highlightCurrentPlayer(currentPlayer)}, 1000);
          }
        }
      });
      
      $("#reset").click(function(){
        location.reload();
      });
      
      $(".card").each(function(){
        var num = $(this).data("face");
        $(this).text(num);
      });
      
      var currentPlayer = "#player1";
      highlightCurrentPlayer(currentPlayer);
    </script>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  </body>
</html>